:py:mod:`danRerLib.mapping`
===========================

.. py:module:: danRerLib.mapping

.. autoapi-nested-parse::

   This script contains all the tools necessary to map zebrafish
   gene ids from the varying identification types. The mapping
   data has been downloaded directly from NCBI and ZFIN. Check
   out the database README for more information.



Module Contents
---------------


Functions
~~~~~~~~~

.. autoapisummary::

   danRerLib.mapping.convert_ids
   danRerLib.mapping.add_mapped_column
   danRerLib.mapping.convert_to_human
   danRerLib.mapping.convert_to_zebrafish
   danRerLib.mapping.get_ortho_ids
   danRerLib.mapping.add_mapped_ortholog_column
   danRerLib.mapping.build_gene_mapping
   danRerLib.mapping.build_ortho_mapping
   danRerLib.mapping.convert_to_str
   danRerLib.mapping._make_sure_is_pandas_series
   danRerLib.mapping._check_valid_zebrafish_gene_id_type
   danRerLib.mapping._check_valid_gene_id_type_for_orthology
   danRerLib.mapping._check_column_name_matches_id_choice



Attributes
~~~~~~~~~~

.. autoapisummary::

   danRerLib.mapping.ids


.. py:exception:: DatabaseNotFoundError


   Bases: :py:obj:`Exception`

   Raised when the the database directory is not found


.. py:exception:: InvalidGeneTypeError


   Bases: :py:obj:`Exception`

   Raised when the the database directory is not found


.. py:function:: convert_ids(gene_list, id_from, id_to, keep_mapping=False, out_format=None)

   Convert a list of Gene IDs.

   :param gene_list: A list of Gene IDs with supported formats like list, pd.Series,
                     pd.DataFrame, or np.array.
   :type gene_list: array-like
   :param id_from: The current Gene ID type.
   :type id_from: str
   :param id_to: The Gene ID type to convert to.
   :type id_to: str
   :param keep_mapping: Whether to keep a mapping of the original IDs to the
                        converted IDs. Default is False.
   :type keep_mapping: bool, optional
   :param out_format: The desired output format for the result. Default is None.
   :type out_format: str, optional

   :returns: A pandas Series or DataFrame containing the converted Gene IDs.
   :rtype: pd.Series or pd.DataFrame

   Other:
       Gene ID Type Options: NCBI Gene ID, ZFIN ID, Symbol, Ensembl ID


.. py:function:: add_mapped_column(data, id_from, id_to, column_name_with_ids=None, keep_old_ids=True, drop_na=False)

   Add a new column to a pandas DataFrame with mapped Gene IDs.

   :param data: A pandas DataFrame containing a column that has Gene IDs of some type.
   :type data: pd.DataFrame
   :param id_from: The current Gene ID type. Must be one of: NCBI Gene ID, ZFIN ID, Ensembl ID, or Symbol.
   :type id_from: str
   :param id_to: The Gene ID type to convert to. Must be one of: NCBI Gene ID, ZFIN ID, Ensembl ID, or Symbol.
   :type id_to: str
   :param column_name_with_ids: The name of the column containing the Gene IDs if it doesn't match id_from.
   :type column_name_with_ids: str, optional
   :param keep_old_ids: Whether to keep the old Gene ID column. Default is True.
   :type keep_old_ids: bool, optional
   :param drop_na: Whether to drop rows with NA values in the resulting mapped column. Default is False.
   :type drop_na: bool, optional

   :returns: None

   .. rubric:: Notes

   - This function adds a new column to the input DataFrame containing the mapped Gene IDs.
   - The new column will have the name 'Gene ID (Mapped)' unless specified otherwise.


.. py:function:: convert_to_human(gene_list, zfish_gene_type, keep_mapping=False, keep_missing_orthos=False)


.. py:function:: convert_to_zebrafish(gene_list, zfish_gene_type, keep_mapping=False, keep_missing_orthos=False)


.. py:function:: get_ortho_ids(gene_list: list, id_from: str, id_to: str, keep_mapping=False, keep_missing_orthos=False)

   :param data - a pandas DataFrame containing a column that has Gene IDs of some type:
   :param id_from - the current Gene ID type must be: NCBI Gene ID, ZFIN ID,
                                                      Ensembl ID, Symbol, or Human NCBI Gene ID
   :param id_to - the Gene ID type to convert to: NCBI Gene ID, ZFIN ID,
                                                  Ensembl ID, Symbol, or Human NCBI Gene ID
   :param must be: NCBI Gene ID, ZFIN ID,
                   Ensembl ID, Symbol, or Human NCBI Gene ID
   :param column_name_with_ids - the name of the column containing the Gene IDs (if: the column name does not match id_from)
   :param keep_old_ids - if you would like to keep the old Gene ID column:


.. py:function:: add_mapped_ortholog_column(data: danRerLib.settings.pd.DataFrame, id_from: str, id_to: str, column_name_with_ids=None, keep_old_ids=True, drop_na=False)

   :param gene_list - a list of Gene IDs with supported formats list: pd.DataFrame and np.array
   :param pd.Series: pd.DataFrame and np.array
   :param : pd.DataFrame and np.array
   :param id_from - the current Gene ID type must be: NCBI Gene ID, ZFIN ID,
                                                      Ensembl ID, Symbol, or Human NCBI Gene ID
   :param id_to - the Gene ID type to convert to: NCBI Gene ID, ZFIN ID,
                                                  Ensembl ID, Symbol, or Human NCBI Gene ID
   :param must be: NCBI Gene ID, ZFIN ID,
                   Ensembl ID, Symbol, or Human NCBI Gene ID


.. py:function:: build_gene_mapping()

   purpose:    the purpose of this function is to build the master gene mapping file
               named 'master_gene_mapping_file_V<VERSION_NUM>.txt
               - the files used to build the mapping file have been downloaded from
                 ZFIN and should be in the database/raw_data sub directory
   dependencies:   zfin_to_ncbi_V<VERSION_NUM>.txt
                   zfin_to_ensembl_V<VERSION_NUM>.txt


.. py:function:: build_ortho_mapping()

   purpose:    the purpose of this function is to build the master orthology mapping file
               named 'master_ortho_mapping_file_V<VERSION_NUM>.txt
               - the files used to build the orthology file have been downloaded from
                 ZFIN and should be in the database/raw_data sub directory
   dependencies:   zfin_to_ncbi_V<VERSION_NUM>.txt
                   zfin_to_ensembl_V<VERSION_NUM>.txt


.. py:function:: convert_to_str(value)


.. py:function:: _make_sure_is_pandas_series(gene_list, id_from)


.. py:function:: _check_valid_zebrafish_gene_id_type(gene_id_types)


.. py:function:: _check_valid_gene_id_type_for_orthology(gene_id_from, gene_id_to)


.. py:function:: _check_column_name_matches_id_choice(data: danRerLib.settings.pd.DataFrame, id_from: str, column_name: str)


.. py:data:: ids
   :value: ['ZDB-GENE-030131-2931', 'ZDB-GENE-081031-55', 'ZDB-GENE-081031-61', 'ZDB-GENE-110420-1',...

   

